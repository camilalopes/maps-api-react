(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(40)},23:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(3),i=n.n(r),c=(n(23),n(5)),s=n(6),l=n(8),u=n(7),d=n(9),p=n(4),m=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("ul",{className:"venue-list"},this.props.markers.map(function(t,n){return o.a.createElement("li",{key:n},o.a.createElement("div",{role:"button",tabIndex:"0",className:"venue-item",onClick:function(){return e.props.onClick(t)}},t.name))}))}}]),t}(a.Component),f="XC45SLP2PETGKNWV1UFQXSUJ0PNKIUVDQTX0IXOO3CFBGPSM",h=n(15),v=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={showingInfoWindow:!1,center:{lat:49.285,lng:-123.134},markers:[],activeMarkers:[],activeMarker:{id:"",address:"",position:{lat:{},lng:{}},name:"",icon:""},query:""},n.onMarkerClick=function(e){var t=n.state.markers.find(function(t){return t.id===e.id});t.icon="http://maps.google.com/mapfiles/ms/icons/red-dot.png",setTimeout(function(){return t.icon="http://maps.google.com/mapfiles/ms/icons/blue-dot.png"},100),n.setState({activeMarker:e,showingInfoWindow:!0})},n.onClose=function(){n.state.showingInfoWindow&&n.setState({showingInfoWindow:!1})},n.updateQuery=function(e){n.setState({query:e}),n.searchMarker(e)},n.searchMarker=function(e){n.setState({activeMarkers:n.state.markers.filter(function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())>-1})})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;(function(e){var t="".concat("https://api.foursquare.com/v2/venues/","search?ll=").concat(e.lat,", ").concat(e.lng,"\n    &client_id=").concat(f,"&client_secret=").concat("2TEPUANLKA4DIESECEK5T04GEDK31GID1IWJQ314O50VUOMU","&v=").concat("20130619","\n    &query=").concat("Food","&limit=").concat(15);return fetch(t).then(function(e){if(e.ok)return e.json();throw e}).then(function(e){return e.response.venues})})(this.state.center).then(function(t){var n=e.fitIntoMarkers(t);e.setState({markers:n}),e.setState({activeMarkers:n})}).catch(function(e){console.log(e)})}},{key:"fitIntoMarkers",value:function(e){var t,n=[];return e.forEach(function(e){var a={lat:e.location.lat,lng:e.location.lng};t={address:e.location.address,position:a,name:e.name,id:e.id,icon:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png"},n.push(t)}),n}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"map"},o.a.createElement(p.Map,{google:this.props.google,zoom:14,initialCenter:this.state.center},this.state.activeMarkers.map(function(t,n){return o.a.createElement(p.Marker,{onClick:e.onMarkerClick,id:t.id,address:t.address,key:n,icon:t.icon,position:t.position,name:t.name})}),o.a.createElement(p.InfoWindow,{position:{lat:parseFloat(this.state.activeMarker.position.lat)+parseFloat(.002),lng:parseFloat(this.state.activeMarker.position.lng)},visible:this.state.showingInfoWindow,onClose:this.onClose},o.a.createElement("div",null,o.a.createElement("h4",null,this.state.activeMarker.name),o.a.createElement("p",null," ",this.state.activeMarker.address," "))))),o.a.createElement(h.a,{menuOpenButton:o.a.createElement("span",{id:"menu-open"}),menuCloseButton:o.a.createElement("span",{id:"menu-close"}),changeMenuOn:"600px",largeMenuClassName:"side-bar",smallMenuClassName:"",menu:o.a.createElement("div",{className:"side-bar"},o.a.createElement("h1",null," Vancouver Downtown "),o.a.createElement("h2",null," find a good place to eat "),o.a.createElement("input",{type:"text",placeholder:"Search a location name",value:this.state.query,onChange:function(t){return e.updateQuery(t.target.value)},tabIndex:"0",role:"search"}),o.a.createElement(m,{markers:this.state.activeMarkers,onClick:function(t){e.onMarkerClick(t)}}))}))}}]),t}(a.Component),g=Object(p.GoogleApiWrapper)({apiKey:"AIzaSyASTD9r6pWJjIKgNUaQ46sWcMnkF2Nh-T4"})(v),k=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function w(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(o.a.createElement(g,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/maps-api-react",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/maps-api-react","/service-worker.js");k?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):w(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):w(t,e)})}}()}},[[18,1,2]]]);
//# sourceMappingURL=main.7bf052d5.chunk.js.map